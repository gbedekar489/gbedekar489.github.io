<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Financial Opportunities</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://assets.adobedtm.com/b5cbd1a1220e/440e8de8c525/launch-4077adde9d69-development.min.js" async></script>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f7f8fa;
    }
    .container {
      display: flex;
      flex-wrap: wrap;
      min-height: 100vh;
    }
    .left-column {
      flex: 1;
      padding: 40px;
      background-color: #ffffff;
    }
    .right-column {
      flex: 1;
      padding: 40px;
      background-color: #f0f2f5;
    }
    h1 {
      font-size: 2rem;
      margin-bottom: 20px;
    }
    h2 {
      font-size: 1.5rem;
      margin-top: 30px;
      color: #004080;
    }
    p {
      line-height: 1.6;
    }
    ul {
      margin-top: 10px;
    }
    li {
      margin-bottom: 10px;
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 15px;
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    label {
      font-weight: bold;
    }
    input, select, textarea {
      padding: 10px;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      padding: 12px;
      background-color: #0073e6;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 1rem;
      cursor: pointer;
    }
    button:hover {
      background-color: #005bb5;
    }
    @media (max-width: 768px) {
      .container {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>

  <div class="container">
    <div class="left-column">
      <h1>Explore Your Financial Options</h1>
      <p>Whether you're building your portfolio or just getting started, we offer tools and guidance to help you invest wisely.</p>

      <h2>Compare Investment Opportunities</h2>
      <ul>
        <li><strong>Stocks:</strong> High potential returns with higher market volatility.</li>
        <li><strong>Bonds:</strong> Reliable fixed-income options with lower risk.</li>
        <li><strong>Certificates of Deposit (CDs):</strong> Secure, short- to long-term investments with guaranteed returns.</li>
      </ul>

      <h2>Why Choose Us?</h2>
      <ul>
        <li>Personalized investment advice based on your risk tolerance and goals.</li>
        <li>Access to exclusive financial products and offers.</li>
        <li>Track performance and adjust your strategy in real time.</li>
      </ul>

      <p>Ready to take the next step? Fill out the form to see how we can help grow your wealth.</p>
    </div>

    <div class="right-column" id="form-container">
      <!-- AJO will inject the form here if user is not in audience -->
    </div>
    <div class="error" id="error-message"></div>
    <div id="message"></div> <!-- Added this div for displaying messages -->

  </div>

  <!-- Web SDK and AJO logic -->
  <script>
        function handleSubscription() {
            window.adobeDataLayer = window.adobeDataLayer || [];

            
            // Get the selected newsletter option
            const selectedNewsletter = document.querySelector('input[name="newsletter"]:checked');
            if (!selectedNewsletter) {
                document.getElementById("error-message").textContent = "Please select a newsletter.";
                return;
            }
            
            // Clear previous error messages
            document.getElementById("error-message").textContent = "";

            const subscriptionEvent = {
                event: "newsletterSubscription",
                xdm: {
                    eventType: "newsletterSubscription",
                    eventID: "newsletter_signup_event",
                    timestamp: new Date().toISOString(),
					FinancialInterest: {
				            PreferredFinancialInstrument: selectedNewsletter.value
										}
					}
            };

            console.log("ðŸ“© Sending data to AEP:", subscriptionEvent);

            // Push the event to Adobe Data Layer
            window.adobeDataLayer.push(subscriptionEvent);

            // Show success message
            document.getElementById("message").textContent = `âœ… Successfully subscribed to ${selectedNewsletter.value}!`;

            // Optionally, reset the form after submission
            document.getElementById("subscriptionForm").reset();
        }
    </script>
	<script>
		alloy("sendEvent", {
    xdm: {
      identityMap: {
        ECID: [
          {
            id: _satellite.getVar("ECID"),
            authenticatedState: "ambiguous",
            primary: true
          }
        ]
      }
    },
    personalization: {
      decisionScopes: [
        // Replace with your own decision scopes
        "ewogICJhY3Rpdml0eUlkIjogImRwczpvZmZlci1hY3Rpdml0eToxYTdmMzBkMzgyOWFkZGUyIiwKICAicGxhY2VtZW50SWQiOiAiZHBzOm9mZmVyLXBsYWNlbWVudDoxYTdmMmEyMmEyOTc5MTYxIgp9",
        "ewogICJhY3Rpdml0eUlkIjogImRwczpvZmZlci1hY3Rpdml0eToxYTdmMzBkMzgyOWFkZGUyIiwKICAicGxhY2VtZW50SWQiOiAiZHBzOm9mZmVyLXBsYWNlbWVudDoxYTdmMmEwYTc0NzdlOTYyIgp9",
        "ewogICJhY3Rpdml0eUlkIjogImRwczpvZmZlci1hY3Rpdml0eToxYTdmMzBkMzgyOWFkZGUyIiwKICAicGxhY2VtZW50SWQiOiAiZHBzOm9mZmVyLXBsYWNlbWVudDoxYTdmMjg5YWZjMzdlOTYxIgp9"
      ]
    }
  }).then(result => {
    console.log("ðŸ“¦ Full sendEvent response:", result);

    const decisions = result.propositions || result.handle?.find(h => h.type === "personalization:decisions")?.payload;

    const container = document.getElementById("form-container");

    if (decisions && decisions.length > 0) {
      const offer = decisions[0]?.items?.[0];

      if (offer) {
        console.log("âœ… Offer received:", offer.name);
        console.log("ðŸ–¼ï¸ Offer content:", offer.data?.content);

        if (offer.id.startsWith("dps:fallback-offer")) {
          // Show the form if it's a fallback offer
          container.innerHTML = offer.data.content;
        } else {
          // Inject image directly
          const img = document.createElement("img");
          img.src = offer.data.content;
          img.alt = offer.name || "Personalized Offer";
          img.style.maxWidth = "100%";
          img.style.height = "auto";
          container.innerHTML = ""; // clear anything before adding
          container.appendChild(img);
        }
      } else {
        console.log("âš ï¸ No offer items found in the decision payload.");
      }
    } else {
      console.log("ðŸš« No personalization decisions received.");
    }

    if (result.errors && result.errors.length > 0) {
      console.warn("âš ï¸ Errors occurred:", result.errors);
    }
  }).catch(error => {
    console.error("ðŸš¨ Error in sendEvent:", error);
  });

	</script>
  
</body>
</html>
